<div class="culinary-card p-6 max-w-2xl mx-auto slide-in-up">
  <h2 class="text-2xl font-bold mb-4 text-center text-white">Dodaj przepis</h2>
  <form [formGroup]="recipeForm" (ngSubmit)="onSubmit()" class="space-y-4">

    <input type="text" formControlName="title" placeholder="Tytu≈Ç przepisu" class="culinary-input" />

    <textarea formControlName="description" placeholder="Opis przepisu" class="culinary-input"></textarea>

    <select formControlName="difficulty" class="culinary-input">
      <option value="" disabled>Wybierz poziom trudno≈õci</option>
      <option value="≈ÅATWY">≈Åatwy</option>
      <option value="≈öREDNI">≈öredni</option>
      <option value="TRUDNY">Trudny</option>
    </select>

    <div>
      <label for="time" class="label">Czas gotowania (minuty):</label>
      <input id="time" type="number" formControlName="time" placeholder="Czas gotowania" class="culinary-input" />
    </div>

    <div>
      <label for="portions" class="label">Liczba porcji:</label>
      <input id="portions" type="number" formControlName="portions" placeholder="Liczba porcji" class="culinary-input" max="100" />
    </div>

    <div>
      <h3 class="text-lg font-semibold text-white mt-4">Tagi</h3>
      <button type="button" (click)="addTag()" class="culinary-btn-secondary mt-2">Dodaj tag</button>

      <ul class="space-y-2 mt-2">
        <li *ngFor="let tag of tags.controls; let i = index" class="flex gap-2 items-start">
          <div class="relative w-full">
            <input
              type="text"
              [formControl]="getFormControl(tag.get('name'))"
              class="culinary-input"
              placeholder="Wyszukaj tag..."
              autocomplete="off"
              (focus)="onTagInputFocus(i)"
              (blur)="onTagInputBlur(i)"
            />
            <div *ngIf="tagSearchResults[i]?.length && activeTagInput === i" class="absolute left-0 right-0 bg-white rounded shadow mt-1 z-10">
              <div
                *ngFor="let tagOption of tagSearchResults[i]"
                (mousedown)="selectTag(i, tagOption)"
                class="p-2 hover:bg-orange-100 cursor-pointer"
              >
                {{ tagOption.name }}
              </div>
            </div>
          </div>
          <button type="button" (click)="removeTag(i)" class="btn btn-sm btn-error">üóëÔ∏è</button>
        </li>
      </ul>
    </div>

    <button type="submit" [disabled]="recipeForm.invalid" class="culinary-btn-primary w-full">Dodaj przepis</button>
  </form>
</div>
